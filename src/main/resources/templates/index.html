<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DeepSeek Demo - AIåŠŸèƒ½æ¼”ç¤º</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="home-container">
        <div class="home-content">
            <div class="home-header">
                <h1>ğŸ¤– DeepSeek Demo</h1>
                <p>ä½“éªŒå¼ºå¤§çš„AIåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ™ºèƒ½å¯¹è¯ã€è¯­è¨€ç¿»è¯‘å’Œå¤©æ°”æŸ¥è¯¢</p>
            </div>
            
            <!-- çŠ¶æ€æ¶ˆæ¯æ˜¾ç¤º - ç§»åˆ°è¡¨å•ä¸Šæ–¹ -->
            <div th:if="${param.success}" class="status-success">
                âœ… è®¾ç½®æˆåŠŸï¼
            </div>
            <div th:if="${param.error}" class="status-error">
                <div th:if="${param.error == 'missing_api_key'}">
                    âŒ è¯·ä¸ºè¿œç¨‹DeepSeekè¾“å…¥æœ‰æ•ˆçš„API Key
                </div>
                <div th:unless="${param.error == 'missing_api_key'}">
                    âŒ è®¾ç½®å¤±è´¥ï¼Œè¯·é‡è¯•
                </div>
            </div>
            
            <form th:action="@{/setApiKey}" method="post" class="api-key-form">
                <div class="form-group">
                    <label class="form-label">ğŸŒ AI æä¾›å•†</label>
                    <div class="provider-options">
                        <label class="provider-option" id="ollamaOption">
                            <input type="radio" name="provider" value="ollama" checked>
                            <div class="provider-icon">ğŸ–¥ï¸</div>
                            <div class="provider-name">æœ¬åœ° Ollama</div>
                            <div class="provider-desc">å¿«é€Ÿå…è´¹</div>
                        </label>
                        <label class="provider-option" id="deepseekOption">
                            <input type="radio" name="provider" value="deepseek">
                            <div class="provider-icon">â˜ï¸</div>
                            <div class="provider-name">è¿œç¨‹ DeepSeek</div>
                            <div class="provider-desc">åŠŸèƒ½å¼ºå¤§</div>
                        </label>
                    </div>
                </div>
                
                <div class="form-group" id="apiKeyGroup" style="display: none;">
                    <label class="form-label">ğŸ”‘ API Key</label>
                    <input type="password" 
                           name="apiKey" 
                           class="form-input" 
                           placeholder="è¯·è¾“å…¥ä½ çš„ DeepSeek API Key" 
                           id="apiKeyInput">
                </div>
                
                <button type="submit" class="btn btn-primary">å¼€å§‹ä½¿ç”¨</button>
            </form>
            
            <div class="features">
                <a th:href="@{/chat}" class="feature-card chat-card">
                    <span class="feature-icon">ğŸ’¬</span>
                    <div class="feature-title">æ™ºèƒ½å¯¹è¯</div>
                    <div class="feature-desc">ä¸AIè¿›è¡Œå®æ—¶æµå¼å¯¹è¯ï¼Œä½“éªŒæ™ºèƒ½äº¤äº’</div>
                </a>
                
                <a th:href="@{/translate}" class="feature-card translate-card">
                    <span class="feature-icon">ğŸŒ</span>
                    <div class="feature-title">è¯­è¨€ç¿»è¯‘</div>
                    <div class="feature-desc">åŸºäºAIçš„æ™ºèƒ½ç¿»è¯‘æœåŠ¡ï¼Œæ”¯æŒå¤šè¯­è¨€äº’è¯‘</div>
                </a>
                
                <a th:href="@{/weather}" class="feature-card weather-card">
                    <span class="feature-icon">ğŸŒ¤ï¸</span>
                    <div class="feature-title">å¤©æ°”æŸ¥è¯¢</div>
                    <div class="feature-desc">é€šè¿‡AIè·å–åŸå¸‚å¤©æ°”ä¿¡æ¯ï¼Œæ™ºèƒ½å¤©æ°”åŠ©æ‰‹</div>
                </a>
            </div>
        </div>
    </div>
    
    <div class="footer">
        Â© 2025 <a href="http://yjmyzz.cnblogs.com" target="_blank">è©ææ ‘ä¸‹çš„æ¨è¿‡</a> - DeepSeek Demo
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è‡ªåŠ¨èšç„¦åˆ°API Keyè¾“å…¥æ¡†
            const apiKeyInput = document.querySelector('#apiKeyInput');
            if (apiKeyInput) {
                apiKeyInput.focus();
            }
            
            // AIæä¾›å•†é€‰æ‹©é€»è¾‘
            const ollamaOption = document.getElementById('ollamaOption');
            const deepseekOption = document.getElementById('deepseekOption');
            const apiKeyInputField = document.getElementById('apiKeyInput');
            
            // åˆå§‹åŒ–çŠ¶æ€
            updateProviderSelection();
            
            // ç›‘å¬é€‰æ‹©å˜åŒ–
            ollamaOption.addEventListener('click', function() {
                document.querySelector('input[name="provider"][value="ollama"]').checked = true;
                updateProviderSelection();
            });
            
            deepseekOption.addEventListener('click', function() {
                document.querySelector('input[name="provider"][value="deepseek"]').checked = true;
                updateProviderSelection();
            });
            
            function updateProviderSelection() {
                const selectedProvider = document.querySelector('input[name="provider"]:checked').value;
                
                // é‡ç½®æ‰€æœ‰é€‰é¡¹çš„æ ·å¼
                ollamaOption.classList.remove('selected');
                deepseekOption.classList.remove('selected');
                
                if (selectedProvider === 'ollama') {
                    ollamaOption.classList.add('selected');
                    document.getElementById('apiKeyGroup').style.display = 'none';
                    apiKeyInputField.required = false;
                    apiKeyInputField.value = '';
                } else {
                    deepseekOption.classList.add('selected');
                    document.getElementById('apiKeyGroup').style.display = 'block';
                    apiKeyInputField.required = true;
                }
            }
            
            // æ·»åŠ è¡¨å•æäº¤åŠ¨ç”»
            const form = document.querySelector('form');
            form.addEventListener('submit', function() {
                const submitBtn = document.querySelector('.btn-primary');
                submitBtn.textContent = 'è®¾ç½®ä¸­...';
                submitBtn.disabled = true;
            });
        });
    </script>
</body>
</html> 